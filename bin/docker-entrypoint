#!/bin/bash -e

# Enable debug logging
echo "Starting docker-entrypoint..."
echo "Command: $@"

# If running the rails server then create or migrate existing database
if [[ "$@" == *"rails server"* ]] || [[ "$@" == *"rails s"* ]]; then
  echo "Preparing database..."
  ./bin/rails db:prepare
fi

exec "${@}"
