<% content_for :title, "Home - Full-stack Developer Portfolio" %>
<% content_for :description, "Welcome to my portfolio. I'm a full-stack developer specializing in Ruby on Rails and modern web technologies." %>

<!-- Hero Section -->
<section class="relative min-h-[90vh] sm:min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 text-white overflow-hidden flex items-center">
  <!-- Animated Background Elements -->
  <div class="absolute inset-0 overflow-hidden">
    <!-- Gradient Orbs -->
    <div class="absolute top-1/4 -left-20 w-72 h-72 sm:w-96 sm:h-96 bg-blue-500/30 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute bottom-1/4 -right-20 w-80 h-80 sm:w-[28rem] sm:h-[28rem] bg-purple-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[30rem] h-[30rem] sm:w-[40rem] sm:h-[40rem] bg-cyan-500/10 rounded-full blur-3xl"></div>

    <!-- Grid Pattern -->
    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDBoNjB2NjBIMHoiLz48cGF0aCBkPSJNMzAgMzBtLTEgMGExIDEgMCAxIDAgMiAwYTEgMSAwIDEgMCAtMiAwIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMSkiLz48L2c+PC9zdmc+')] opacity-40"></div>
  </div>

  <!-- 3D Scene Container -->
  <div id="hero-3d" class="hero-3d-container"></div>

  <div class="relative z-10 w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20">
    <div class="grid lg:grid-cols-2 gap-8 lg:gap-16 items-center">
      <!-- Left Content -->
      <div class="text-center lg:text-left" data-animate="slide-in-left">
        <!-- Greeting Badge -->
        <div class="inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full border border-white/20 mb-6" data-animate="fade-in" data-animate-delay="200">
          <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
          <span class="text-blue-200 text-sm font-medium">Available for new projects</span>
        </div>

        <!-- Main Heading -->
        <h1 class="text-display mb-6">
          <span class="block text-white/90">Building the Future,</span>
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 via-blue-300 to-purple-300">
            One Line at a Time
          </span>
        </h1>

        <!-- Description -->
        <p class="text-lg sm:text-xl text-blue-100/80 mb-8 max-w-xl mx-auto lg:mx-0 leading-relaxed">
          Full-stack developer passionate about creating elegant, scalable solutions.
          Specializing in Ruby on Rails, modern JavaScript, and cloud technologies.
        </p>

        <!-- CTA Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
          <%= link_to projects_path, class: "group inline-flex items-center justify-center gap-2 px-6 py-3.5 sm:px-8 sm:py-4 bg-white text-blue-600 font-semibold rounded-xl shadow-lg shadow-white/25 hover:shadow-xl hover:shadow-white/30 transition-all duration-300 hover:-translate-y-1" do %>
            View My Work
            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          <% end %>
          <%= link_to "Get in Touch", contact_path, class: "inline-flex items-center justify-center gap-2 px-6 py-3.5 sm:px-8 sm:py-4 border-2 border-white/30 text-white font-semibold rounded-xl hover:bg-white/10 hover:border-white/50 transition-all duration-300" %>
        </div>

        <!-- Stats -->
        <div class="mt-12 sm:mt-16 grid grid-cols-3 gap-4 sm:gap-8 max-w-md mx-auto lg:mx-0" data-animate="slide-in-up" data-animate-delay="400">
          <div class="text-center p-3 sm:p-4 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10">
            <div class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white" data-count-to="50" data-count-duration="2000">0</div>
            <div class="text-blue-200/70 text-xs sm:text-sm mt-1">Projects</div>
          </div>
          <div class="text-center p-3 sm:p-4 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10">
            <div class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white" data-count-to="5" data-count-duration="2000">0</div>
            <div class="text-blue-200/70 text-xs sm:text-sm mt-1">Years Exp</div>
          </div>
          <div class="text-center p-3 sm:p-4 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10">
            <div class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white" data-count-to="100" data-count-duration="2000">0</div>
            <div class="text-blue-200/70 text-xs sm:text-sm mt-1">Happy Clients</div>
          </div>
        </div>
      </div>

      <!-- Right side - Code snippet (visible on desktop) -->
      <div class="hidden lg:block relative z-20" data-animate="slide-in-right">
        <div class="relative">
          <!-- Decorative background -->
          <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl transform rotate-3 opacity-20 blur-sm"></div>

          <!-- Code Window -->
          <div class="relative bg-slate-900/90 backdrop-blur-sm rounded-2xl p-6 font-mono text-sm shadow-2xl border border-white/10">
            <!-- Window Controls -->
            <div class="flex items-center gap-2 mb-6">
              <div class="w-3 h-3 rounded-full bg-red-500"></div>
              <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
              <div class="w-3 h-3 rounded-full bg-green-500"></div>
              <span class="ml-4 text-slate-500 text-xs">developer.rb</span>
            </div>

            <!-- Code Content -->
            <pre class="text-sm leading-relaxed"><code><span class="text-purple-400">class</span> <span class="text-yellow-300">Developer</span>
  <span class="text-purple-400">def</span> <span class="text-blue-300">skills</span>
    [<span class="text-green-300">"Ruby on Rails"</span>,
     <span class="text-green-300">"JavaScript"</span>,
     <span class="text-green-300">"PostgreSQL"</span>,
     <span class="text-green-300">"Docker"</span>,
     <span class="text-green-300">"AWS"</span>]
  <span class="text-purple-400">end</span>

  <span class="text-purple-400">def</span> <span class="text-blue-300">passion</span>
    <span class="text-green-300">"Building great software"</span>
  <span class="text-purple-400">end</span>
<span class="text-purple-400">end</span></code></pre>

            <!-- Typing cursor -->
            <div class="mt-4 flex items-center gap-2">
              <span class="text-slate-500">></span>
              <span class="w-2 h-5 bg-blue-400 animate-pulse"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <div class="absolute bottom-6 sm:bottom-10 left-1/2 transform -translate-x-1/2 z-10">
    <div class="flex flex-col items-center gap-2">
      <span class="text-white/50 text-xs uppercase tracking-widest">Scroll</span>
      <div class="w-6 h-10 border-2 border-white/30 rounded-full flex justify-center pt-2">
        <div class="w-1.5 h-3 bg-white/60 rounded-full animate-bounce"></div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Projects -->
<section class="responsive-section bg-slate-50 dark:bg-slate-900" data-animate-stagger="slide-in-up">
  <div class="section-container">
    <div class="section-header" data-animate="fade-in">
      <span class="inline-block px-4 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm font-semibold rounded-full mb-4">Portfolio</span>
      <h2 class="section-title text-slate-900 dark:text-white">Featured Projects</h2>
      <p class="section-subtitle text-slate-600 dark:text-slate-400">A selection of my recent work showcasing various technologies and problem-solving approaches.</p>
    </div>

    <% if @featured_projects.present? %>
      <div class="projects-grid">
        <% @featured_projects.each do |project| %>
          <div data-animate-child>
            <%= render ProjectCard3dComponent.new(project: project) %>
          </div>
        <% end %>
      </div>
      <div class="text-center mt-12 lg:mt-16" data-animate="fade-in">
        <%= link_to "View All Projects", projects_path, class: "btn btn-primary btn-lg hover-lift" %>
      </div>
    <% else %>
      <div class="text-center py-16 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700">
        <div class="w-16 h-16 mx-auto mb-4 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center">
          <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
          </svg>
        </div>
        <p class="text-slate-500 dark:text-slate-400">No featured projects yet. Check back soon!</p>
      </div>
    <% end %>
  </div>
</section>

<!-- Skills Section -->
<section class="responsive-section bg-white dark:bg-slate-800">
  <div class="section-container">
    <div class="section-header" data-animate="fade-in">
      <span class="inline-block px-4 py-1.5 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-sm font-semibold rounded-full mb-4">Expertise</span>
      <h2 class="section-title text-slate-900 dark:text-white">Technical Skills</h2>
      <p class="section-subtitle text-slate-600 dark:text-slate-400">Technologies and tools I work with to bring ideas to life.</p>
    </div>

    <% if @skills_by_category.present? %>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8" data-animate-stagger="fade-in-scale">
        <% @skills_by_category.each do |category, skills| %>
          <div class="group bg-slate-50 dark:bg-slate-900 rounded-2xl p-6 lg:p-8 hover:shadow-xl hover:shadow-slate-900/5 dark:hover:shadow-slate-900/50 transition-all duration-300 border border-slate-200 dark:border-slate-700 hover:border-blue-200 dark:hover:border-blue-800" data-animate-child>
            <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3">
              <span class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                </svg>
              </span>
              <span class="capitalize"><%= category %></span>
            </h3>
            <div class="space-y-5">
              <% skills.each do |skill| %>
                <div>
                  <div class="flex justify-between mb-2">
                    <span class="text-sm font-semibold text-slate-700 dark:text-slate-300"><%= skill.name %></span>
                    <span class="text-sm font-medium text-slate-500 dark:text-slate-400"><%= skill.proficiency %>%</span>
                  </div>
                  <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 overflow-hidden">
                    <div class="bg-gradient-to-r from-blue-500 to-cyan-500 h-2.5 rounded-full transition-all duration-1000 ease-out"
                         style="width: 0%"
                         data-animate-width="<%= skill.proficiency %>%"></div>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-16">
        <p class="text-slate-500 dark:text-slate-400">Skills coming soon!</p>
      </div>
    <% end %>
  </div>
</section>

<!-- Experience Timeline -->
<section class="responsive-section bg-slate-50 dark:bg-slate-900">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="section-header" data-animate="fade-in">
      <span class="inline-block px-4 py-1.5 bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 text-sm font-semibold rounded-full mb-4">Journey</span>
      <h2 class="section-title text-slate-900 dark:text-white">Experience</h2>
      <p class="section-subtitle text-slate-600 dark:text-slate-400">My professional journey in software development.</p>
    </div>

    <% if @experiences.present? %>
      <div class="relative">
        <!-- Timeline line -->
        <div class="absolute left-4 md:left-1/2 transform md:-translate-x-px top-0 bottom-0 w-0.5 bg-gradient-to-b from-blue-500 via-purple-500 to-cyan-500"></div>

        <div class="space-y-8 md:space-y-12">
          <% @experiences.each_with_index do |experience, index| %>
            <div class="relative flex items-start md:justify-between <%= index.even? ? 'md:flex-row' : 'md:flex-row-reverse' %>"
                 data-animate="<%= index.even? ? 'slide-in-left' : 'slide-in-right' %>">
              <!-- Timeline dot -->
              <div class="absolute left-4 md:left-1/2 transform -translate-x-1/2 w-4 h-4 bg-white dark:bg-slate-800 rounded-full border-4 border-blue-500 shadow-lg z-10"></div>

              <!-- Content -->
              <div class="ml-12 md:ml-0 md:w-5/12 bg-white dark:bg-slate-800 rounded-2xl shadow-lg shadow-slate-900/5 dark:shadow-slate-900/50 p-6 lg:p-8 hover:shadow-xl transition-shadow border border-slate-200 dark:border-slate-700">
                <div class="inline-flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm font-medium rounded-full mb-3">
                  <%= experience.start_date.strftime("%b %Y") %> - <%= experience.end_date&.strftime("%b %Y") || "Present" %>
                </div>
                <h3 class="text-lg lg:text-xl font-bold text-slate-900 dark:text-white mb-1"><%= experience.role %></h3>
                <p class="text-blue-600 dark:text-blue-400 font-semibold mb-3"><%= experience.company %></p>
                <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed"><%= truncate(experience.description, length: 150) %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% else %>
      <div class="text-center py-16 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700">
        <p class="text-slate-500 dark:text-slate-400">Experience details coming soon!</p>
      </div>
    <% end %>
  </div>
</section>

<!-- Latest Blog Posts -->
<section class="responsive-section bg-white dark:bg-slate-800">
  <div class="section-container">
    <div class="section-header" data-animate="fade-in">
      <span class="inline-block px-4 py-1.5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 text-sm font-semibold rounded-full mb-4">Blog</span>
      <h2 class="section-title text-slate-900 dark:text-white">Latest Articles</h2>
      <p class="section-subtitle text-slate-600 dark:text-slate-400">Thoughts, tutorials, and insights about software development.</p>
    </div>

    <% if @recent_posts.present? %>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8" data-animate-stagger="slide-in-up">
        <% @recent_posts.each do |post| %>
          <article class="group bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl overflow-hidden hover:shadow-xl hover:shadow-slate-900/5 dark:hover:shadow-slate-900/50 transition-all duration-300 hover:-translate-y-1" data-animate-child>
            <div class="p-6 lg:p-8">
              <div class="flex flex-wrap items-center gap-2 mb-4">
                <span class="text-sm text-slate-500 dark:text-slate-400"><%= post.published_at&.strftime("%B %d, %Y") %></span>
                <% if post.reading_time.present? %>
                  <span class="px-2.5 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-medium rounded-full"><%= post.reading_time_text %></span>
                <% end %>
              </div>
              <h3 class="text-lg lg:text-xl font-bold text-slate-900 dark:text-white mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-2">
                <%= link_to post.title, blog_post_path(post) %>
              </h3>
              <p class="text-slate-600 dark:text-slate-400 text-sm mb-4 line-clamp-3"><%= truncate(post.excerpt.presence || post.content, length: 120) %></p>
              <%= link_to blog_post_path(post), class: "inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-semibold group-hover:gap-3 transition-all" do %>
                Read More
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              <% end %>
            </div>
          </article>
        <% end %>
      </div>
      <div class="text-center mt-12 lg:mt-16" data-animate="fade-in">
        <%= link_to "View All Articles", blog_posts_path, class: "btn btn-secondary btn-lg" %>
      </div>
    <% else %>
      <div class="text-center py-16 bg-slate-50 dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-700">
        <p class="text-slate-500 dark:text-slate-400">Blog posts coming soon!</p>
      </div>
    <% end %>
  </div>
</section>

<!-- CTA Section -->
<section class="responsive-section bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 text-white relative overflow-hidden">
  <!-- Background decoration -->
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute top-0 left-0 w-96 h-96 bg-white/10 rounded-full blur-3xl transform -translate-x-1/2 -translate-y-1/2"></div>
    <div class="absolute bottom-0 right-0 w-[30rem] h-[30rem] bg-white/10 rounded-full blur-3xl transform translate-x-1/2 translate-y-1/2"></div>
    <!-- Grid pattern -->
    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDBoNjB2NjBIMHoiLz48cGF0aCBkPSJNMzAgMzBtLTEgMGExIDEgMCAxIDAgMiAwYTEgMSAwIDEgMCAtMiAwIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIi8+PC9nPjwvc3ZnPg==')] opacity-50"></div>
  </div>

  <div class="relative z-10 max-w-4xl mx-auto text-center px-4" data-animate="fade-in-scale">
    <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-6">Let's Work Together</h2>
    <p class="text-lg sm:text-xl text-blue-100 mb-10 max-w-2xl mx-auto leading-relaxed">
      Have a project in mind? I'd love to hear about it. Let's discuss how we can bring your ideas to life.
    </p>
    <%= link_to contact_path, class: "group inline-flex items-center gap-3 px-8 py-4 bg-white text-blue-600 font-semibold text-lg rounded-xl shadow-xl shadow-white/20 hover:shadow-2xl hover:shadow-white/30 transition-all duration-300 hover:-translate-y-1" do %>
      Start a Conversation
      <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
      </svg>
    <% end %>
  </div>
</section>

<script>
  // Animate skill bars when they come into view
  document.addEventListener('DOMContentLoaded', function() {
    const skillBars = document.querySelectorAll('[data-animate-width]');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const bar = entry.target;
          const width = bar.dataset.animateWidth;
          setTimeout(() => {
            bar.style.width = width;
          }, 200);
          observer.unobserve(bar);
        }
      });
    }, { threshold: 0.5 });

    skillBars.forEach(bar => observer.observe(bar));

    // Counter animation
    const counters = document.querySelectorAll('[data-count-to]');

    const counterObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const counter = entry.target;
          const target = parseInt(counter.dataset.countTo);
          const duration = parseInt(counter.dataset.countDuration) || 2000;
          const startTime = performance.now();

          function updateCounter(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const easeOutQuad = 1 - (1 - progress) * (1 - progress);
            counter.textContent = Math.floor(target * easeOutQuad);

            if (progress < 1) {
              requestAnimationFrame(updateCounter);
            } else {
              counter.textContent = target + '+';
            }
          }

          requestAnimationFrame(updateCounter);
          counterObserver.unobserve(counter);
        }
      });
    }, { threshold: 0.5 });

    counters.forEach(counter => counterObserver.observe(counter));
  });
</script>
